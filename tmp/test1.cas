CASL	START	BEGIN	;
BEGIN	LAD	GR6, 0
	LAD	GR7, LIBBUF
	LD	GR2, =6	; line 9
	LD	GR3, =0	; line 9
	ST	GR2, VAR, GR3	; line 9
	LD	GR2, =-7	; line 10
	LD	GR3, =1	; line 10
	ST	GR2, VAR, GR3	; line 10
	LD	GR2, =-8	; line 11
	LD	GR3, =2	; line 11
	ST	GR2, VAR, GR3	; line 11
	LD	GR2, =65	; line 12
	LD	GR3, =6	; line 12
	ST	GR2, VAR, GR3	; line 12
	LD	GR2, =98	; line 13
	LD	GR3, =7	; line 13
	ST	GR2, VAR, GR3	; line 13
	LAD	GR2, 65535	; line 14
	LD	GR3, =12	; line 14
	ST	GR2, VAR, GR3	; line 14
	LAD	GR2, 0	; line 15
	LD	GR3, =13	; line 15
	ST	GR2, VAR, GR3	; line 15
	LD	GR2, =0	; line 18
	LD	GR3, =3	; line 18
	ST	GR2, VAR, GR3	; line 18
	LD	GR2, =1	; line 19
	LD	GR3, =4	; line 19
	ST	GR2, VAR, GR3	; line 19
	LD	GR2, =2	; line 20
	LD	GR3, =5	; line 20
	ST	GR2, VAR, GR3	; line 20
	LD	GR3, =3	; line 21
	LD	GR2, VAR, GR3	; line 21
	LD	GR3, =27	; line 21
	ST	GR2, VAR, GR3	; line 21
	LD	GR3, =4	; line 22
	LD	GR2, VAR, GR3	; line 22
	LD	GR3, =28	; line 22
	ST	GR2, VAR, GR3	; line 22
	LD	GR3, =5	; line 23
	LD	GR2, VAR, GR3	; line 23
	LD	GR3, =29	; line 23
	ST	GR2, VAR, GR3	; line 23
	PUSH	-7	; line 25
	LD	GR3, =0	; line 25
	LD	GR1, VAR, GR3	; line 25
	POP		GR2	; line 25
	CPA	GR2, GR1	; line 25
	JMI	IF0	; line 25
	JUMP	ENDIF0	; line 25
IF0	LD	GR2, =3	; line 27
	LD	GR3, =3	; line 27
	ST	GR2, VAR, GR3	; line 27
ENDIF0	LD	GR3, =2	; line 29
	LD	GR2, VAR, GR3	; line 29
	PUSH	0, 	GR2	; line 29
	LD	GR3, =0	; line 29
	LD	GR1, VAR, GR3	; line 29
	LD	GR2, =7	; line 29
	SUBA	GR1, GR2	; line 29
	POP		GR2	; line 29
	CPA	GR2, GR1	; line 29
	JPL	ENDIF1	; line 29
	LD	GR2, =4	; line 31
	LD	GR3, =4	; line 31
	ST	GR2, VAR, GR3	; line 31
ENDIF1	LD	GR3, =2	; line 33
	LD	GR2, VAR, GR3	; line 33
	XOR	GR2, =-1	; line 33
	ADDA	GR2, =1	; line 33
	LD	GR1, =2	; line 33
	SUBA	GR2, GR1	; line 33
	LD	GR1, =6	; line 33
	CPA	GR2, GR1	; line 33
	JNZ	ENDIF2	; line 33
	LD	GR2, =5	; line 35
	LD	GR3, =5	; line 35
	ST	GR2, VAR, GR3	; line 35
ENDIF2	LD	GR3, =3	; line 37
	LD	GR2, VAR, GR3	; line 37
	LD	GR3, =30	; line 37
	ST	GR2, VAR, GR3	; line 37
	LD	GR3, =4	; line 38
	LD	GR2, VAR, GR3	; line 38
	LD	GR3, =31	; line 38
	ST	GR2, VAR, GR3	; line 38
	LD	GR3, =5	; line 39
	LD	GR2, VAR, GR3	; line 39
	LD	GR3, =32	; line 39
	ST	GR2, VAR, GR3	; line 39
	LD	GR3, =0	; line 41
	LD	GR2, VAR, GR3	; line 41
	PUSH	0, 	GR2	; line 41
	LD	GR3, =1	; line 41
	LD	GR1, VAR, GR3	; line 41
	POP		GR2	; line 41
	CPA	GR2, GR1	; line 41
	JPL	TRUE4	; line 41
	LAD	GR2, 0	; line 41
	JUMP	CONT4	; line 41
TRUE4	LAD	GR2, 65535	; line 41
CONT4	CPL	GR2, =-1	; line 41
	JNZ	ENDIF3	; line 41
	LD	GR2, =6	; line 43
	LD	GR3, =3	; line 43
	ST	GR2, VAR, GR3	; line 43
ENDIF3	LD	GR3, =0	; line 45
	LD	GR2, VAR, GR3	; line 45
	PUSH	0, 	GR2	; line 45
	LD	GR3, =2	; line 45
	LD	GR1, VAR, GR3	; line 45
	LD	GR2, =7	; line 45
	ADDA	GR1, GR2	; line 45
	POP		GR2	; line 45
	CPA	GR2, GR1	; line 45
	JMI	ENDIF5	; line 45
	LD	GR2, =7	; line 47
	LD	GR3, =4	; line 47
	ST	GR2, VAR, GR3	; line 47
ENDIF5	LD	GR3, =2	; line 49
	LD	GR2, VAR, GR3	; line 49
	XOR	GR2, =-1	; line 49
	ADDA	GR2, =1	; line 49
	LD	GR1, =2	; line 49
	ADDA	GR2, GR1	; line 49
	LD	GR1, =5	; line 49
	CPA	GR2, GR1	; line 49
	JZE	ENDIF6	; line 49
	LD	GR2, =8	; line 51
	LD	GR3, =5	; line 51
	ST	GR2, VAR, GR3	; line 51
ENDIF6	LD	GR3, =3	; line 53
	LD	GR2, VAR, GR3	; line 53
	LD	GR3, =33	; line 53
	ST	GR2, VAR, GR3	; line 53
	LD	GR3, =4	; line 54
	LD	GR2, VAR, GR3	; line 54
	LD	GR3, =34	; line 54
	ST	GR2, VAR, GR3	; line 54
	LD	GR3, =5	; line 55
	LD	GR2, VAR, GR3	; line 55
	LD	GR3, =35	; line 55
	ST	GR2, VAR, GR3	; line 55
	LD	GR3, =0	; line 57
	LD	GR2, VAR, GR3	; line 57
	PUSH	0, 	GR2	; line 57
	LD	GR3, =1	; line 57
	LD	GR1, VAR, GR3	; line 57
	POP		GR2	; line 57
	CALL	MULT	; line 57
	XOR	GR2, =-1	; line 57
	ADDA	GR2, =1	; line 57
	PUSH	0, 	GR2	; line 57
	LD	GR3, =1	; line 57
	LD	GR1, VAR, GR3	; line 57
	LD	GR2, =1	; line 57
	CALL	MULT	; line 57
	LD	GR1, GR2	; line 57
	POP		GR2	; line 57
	ADDA	GR2, GR1	; line 57
	PUSH	0, 	GR2	; line 57
	PUSH	-2	; line 57
	LD	GR3, =0	; line 57
	LD	GR2, VAR, GR3	; line 57
	POP		GR1	; line 57
	CALL	MULT	; line 57
	LD	GR1, GR2	; line 57
	POP		GR2	; line 57
	ADDA	GR2, GR1	; line 57
	PUSH	0, 	GR2	; line 57
	LD	GR3, =0	; line 57
	LD	GR1, VAR, GR3	; line 57
	LD	GR2, =3	; line 57
	CALL	DIV	; line 57
	CALL	WRTINT
	CALL	WRTLN
	LD	GR3, =1	; line 57
	LD	GR2, VAR, GR3	; line 57
	LD	GR1, =7	; line 57
	LD	GR0, GR2	; line 57
	LD	GR2, GR1	; line 57
	LD	GR1, GR0	; line 57
	CALL	DIV	; line 57
	PUSH	-10	; line 57
	LD	GR3, =2	; line 57
	LD	GR2, VAR, GR3	; line 57
	XOR	GR2, =-1	; line 57
	ADDA	GR2, =1	; line 57
	PUSH	0, 	GR2	; line 57
	PUSH	1	; line 57
	PUSH	2	; line 57
	LD	GR3, =2	; line 57
	LD	GR1, VAR, GR3	; line 57
	PUSH	0, 	GR1	; line 57
	LD	GR3, =0	; line 57
	LD	GR2, VAR, GR3	; line 57
	POP		GR1	; line 57
	ADDA	GR1, GR2	; line 57
	POP		GR2	; line 57
	ADDA	GR2, GR1	; line 57
	POP		GR1	; line 57
	ADDA	GR1, GR2	; line 57
	LD	GR2, =2	; line 57
	SUBA	GR1, GR2	; line 57
	XOR	GR1, =-1	; line 57
	ADDA	GR1, =1	; line 57
	LD	GR2, GR1	; line 57
	POP		GR1	; line 57
	CALL	DIV	; line 57
	LD	GR2, GR1	; line 57
	POP		GR1	; line 57
	ADDA	GR1, GR2	; line 57
	POP		GR2	; line 57
	SUBA	GR2, GR1	; line 57
	LD	GR1, =24	; line 57
	CPA	GR2, GR1	; line 58
	JZE	ENDIF7	; line 58
	LD	GR2, =0	; line 60
	LD	GR3, =3	; line 60
	ST	GR2, VAR, GR3	; line 60
	JUMP	ENDEL7	; line 63
ENDIF7	LD	GR2, =9	; line 64
	LD	GR3, =3	; line 64
	ST	GR2, VAR, GR3	; line 64
ENDEL7	LD	GR3, =3	; line 66
	LD	GR2, VAR, GR3	; line 66
	LD	GR3, =36	; line 66
	ST	GR2, VAR, GR3	; line 66
	LD	GR3, =27	; line 67
	LD	GR2, VAR, GR3	; line 67
	CALL	WRTINT	; line 67
	LD	GR3, =28	; line 67
	LD	GR2, VAR, GR3	; line 67
	CALL	WRTINT	; line 67
	LD	GR3, =29	; line 67
	LD	GR2, VAR, GR3	; line 67
	CALL	WRTINT	; line 67
	LD	GR3, =30	; line 67
	LD	GR2, VAR, GR3	; line 67
	CALL	WRTINT	; line 67
	LD	GR3, =31	; line 67
	LD	GR2, VAR, GR3	; line 67
	CALL	WRTINT	; line 67
	LD	GR3, =32	; line 67
	LD	GR2, VAR, GR3	; line 67
	CALL	WRTINT	; line 67
	LD	GR3, =33	; line 67
	LD	GR2, VAR, GR3	; line 67
	CALL	WRTINT	; line 67
	LD	GR3, =34	; line 67
	LD	GR2, VAR, GR3	; line 67
	CALL	WRTINT	; line 67
	LD	GR3, =35	; line 67
	LD	GR2, VAR, GR3	; line 67
	CALL	WRTINT	; line 67
	LD	GR3, =36	; line 67
	LD	GR2, VAR, GR3	; line 67
	CALL	WRTINT	; line 67
	CALL	WRTLN	; line 67
	LD	GR3, =1	; line 70
	LD	GR2, VAR, GR3	; line 70
	PUSH	0, 	GR2	; line 70
	LD	GR3, =0	; line 70
	LD	GR1, VAR, GR3	; line 70
	POP		GR2	; line 70
	CPA	GR2, GR1	; line 70
	JMI	TRUE8	; line 70
	LAD	GR2, 0	; line 70
	JUMP	CONT8	; line 70
TRUE8	LAD	GR2, 65535	; line 70
CONT8	LD	GR3, =10	; line 70
	ST	GR2, VAR, GR3	; line 70
	LD	GR3, =10	; line 71
	LD	GR2, VAR, GR3	; line 71
	PUSH	0, 	GR2	; line 71
	LD	GR3, =2	; line 71
	LD	GR1, VAR, GR3	; line 71
	LD	GR2, =0	; line 71
	CPA	GR1, GR2	; line 71
	JMI	TRUE10	; line 71
	LAD	GR1, 0	; line 71
	JUMP	CONT10	; line 71
TRUE10	LAD	GR1, 65535	; line 71
CONT10	POP		GR2	; line 71
	AND	GR2, GR1	; line 71
	CPL	GR2, =-1	; line 71
	JNZ	ENDIF9	; line 71
	LD	GR2, =0	; line 73
	LD	GR3, =3	; line 73
	ST	GR2, VAR, GR3	; line 73
ENDIF9	LD	GR3, =10	; line 75
	LD	GR2, VAR, GR3	; line 75
	PUSH	0, 	GR2	; line 75
	LD	GR3, =2	; line 75
	LD	GR1, VAR, GR3	; line 75
	LD	GR2, =0	; line 75
	CPA	GR1, GR2	; line 75
	JMI	TRUE12	; line 75
	LAD	GR1, 0	; line 75
	JUMP	CONT12	; line 75
TRUE12	LAD	GR1, 65535	; line 75
CONT12	POP		GR2	; line 75
	CPL	GR2, GR1	; line 75
	JNZ	ENDIF11	; line 75
	LD	GR2, =1	; line 77
	LD	GR3, =4	; line 77
	ST	GR2, VAR, GR3	; line 77
ENDIF11	LAD	GR2, 65535	; line 79
	PUSH	0, 	GR2	; line 79
	LD	GR3, =10	; line 79
	LD	GR1, VAR, GR3	; line 79
	POP		GR2	; line 79
	CPL	GR2, GR1	; line 79
	JPL	ENDIF13	; line 79
	LD	GR2, =2	; line 81
	LD	GR3, =5	; line 81
	ST	GR2, VAR, GR3	; line 81
ENDIF13	LD	GR3, =3	; line 83
	LD	GR2, VAR, GR3	; line 83
	LD	GR3, =27	; line 83
	ST	GR2, VAR, GR3	; line 83
	LD	GR3, =4	; line 84
	LD	GR2, VAR, GR3	; line 84
	LD	GR3, =28	; line 84
	ST	GR2, VAR, GR3	; line 84
	LD	GR3, =5	; line 85
	LD	GR2, VAR, GR3	; line 85
	LD	GR3, =29	; line 85
	ST	GR2, VAR, GR3	; line 85
	LD	GR3, =13	; line 87
	LD	GR2, VAR, GR3	; line 87
	PUSH	0, 	GR2	; line 87
	LD	GR3, =12	; line 87
	LD	GR1, VAR, GR3	; line 87
	POP		GR2	; line 87
	CPL	GR2, GR1	; line 87
	JMI	IF14	; line 87
	JUMP	ENDIF14	; line 87
IF14	LD	GR2, =3	; line 89
	LD	GR3, =3	; line 89
	ST	GR2, VAR, GR3	; line 89
ENDIF14	LD	GR3, =10	; line 91
	LD	GR2, VAR, GR3	; line 91
	PUSH	0, 	GR2	; line 91
	LD	GR3, =12	; line 91
	LD	GR1, VAR, GR3	; line 91
	POP		GR2	; line 91
	AND	GR2, GR1	; line 91
	XOR	GR2, =-1	; line 91
	PUSH	0, 	GR2	; line 91
	LD	GR3, =13	; line 91
	LD	GR1, VAR, GR3	; line 91
	POP		GR2	; line 91
	OR	GR2, GR1	; line 91
	XOR	GR2, =-1	; line 91
	CPL	GR2, =-1	; line 91
	JNZ	ENDIF15	; line 91
	LD	GR2, =4	; line 93
	LD	GR3, =4	; line 93
	ST	GR2, VAR, GR3	; line 93
ENDIF15	LAD	GR2, 65535	; line 95
	LAD	GR1, 0	; line 95
	OR	GR2, GR1	; line 95
	PUSH	0, 	GR2	; line 95
	LAD	GR1, 65535	; line 95
	LAD	GR2, 0	; line 95
	CPL	GR1, GR2	; line 95
	JZE	FALSE17	; line 95
	LAD	GR1, 65535	; line 95
	JUMP	CONT17	; line 95
FALSE17	LAD	GR1, 0	; line 95
CONT17	POP		GR2	; line 95
	AND	GR2, GR1	; line 95
	CPL	GR2, =-1	; line 95
	JNZ	ENDIF16	; line 95
	LD	GR2, =5	; line 97
	LD	GR3, =5	; line 97
	ST	GR2, VAR, GR3	; line 97
ENDIF16	LD	GR3, =3	; line 99
	LD	GR2, VAR, GR3	; line 99
	LD	GR3, =30	; line 99
	ST	GR2, VAR, GR3	; line 99
	LD	GR3, =4	; line 100
	LD	GR2, VAR, GR3	; line 100
	LD	GR3, =31	; line 100
	ST	GR2, VAR, GR3	; line 100
	LD	GR3, =5	; line 101
	LD	GR2, VAR, GR3	; line 101
	LD	GR3, =32	; line 101
	ST	GR2, VAR, GR3	; line 101
	LD	GR3, =6	; line 103
	LD	GR2, VAR, GR3	; line 103
	PUSH	0, 	GR2	; line 103
	LD	GR3, =7	; line 103
	LD	GR1, VAR, GR3	; line 103
	POP		GR2	; line 103
	CPL	GR2, GR1	; line 103
	JPL	ENDIF18	; line 103
	LD	GR2, =6	; line 105
	LD	GR3, =3	; line 105
	ST	GR2, VAR, GR3	; line 105
ENDIF18	LD	GR3, =6	; line 107
	LD	GR2, VAR, GR3	; line 107
	LD	GR1, =65	; line 107
	CPL	GR2, GR1	; line 107
	JNZ	ENDIF19	; line 107
	LD	GR2, =7	; line 109
	LD	GR3, =4	; line 109
	ST	GR2, VAR, GR3	; line 109
ENDIF19	LD	GR3, =7	; line 111
	LD	GR2, VAR, GR3	; line 111
	LD	GR1, =98	; line 111
	CPL	GR2, GR1	; line 111
	JZE	FALSE21	; line 111
	LAD	GR2, 65535	; line 111
	JUMP	CONT21	; line 111
FALSE21	LAD	GR2, 0	; line 111
CONT21	XOR	GR2, =-1	; line 111
	CPL	GR2, =-1	; line 111
	JNZ	ENDIF20	; line 111
	LD	GR2, =8	; line 113
	LD	GR3, =5	; line 113
	ST	GR2, VAR, GR3	; line 113
ENDIF20	LD	GR3, =3	; line 115
	LD	GR2, VAR, GR3	; line 115
	LD	GR3, =33	; line 115
	ST	GR2, VAR, GR3	; line 115
	LD	GR3, =4	; line 116
	LD	GR2, VAR, GR3	; line 116
	LD	GR3, =34	; line 116
	ST	GR2, VAR, GR3	; line 116
	LD	GR3, =5	; line 117
	LD	GR2, VAR, GR3	; line 117
	LD	GR3, =35	; line 117
	ST	GR2, VAR, GR3	; line 117
	LD	GR3, =27	; line 118
	LD	GR2, VAR, GR3	; line 118
	CALL	WRTINT	; line 118
	LD	GR3, =28	; line 118
	LD	GR2, VAR, GR3	; line 118
	CALL	WRTINT	; line 118
	LD	GR3, =29	; line 118
	LD	GR2, VAR, GR3	; line 118
	CALL	WRTINT	; line 118
	LD	GR3, =30	; line 118
	LD	GR2, VAR, GR3	; line 118
	CALL	WRTINT	; line 118
	LD	GR3, =31	; line 118
	LD	GR2, VAR, GR3	; line 118
	CALL	WRTINT	; line 118
	LD	GR3, =32	; line 118
	LD	GR2, VAR, GR3	; line 118
	CALL	WRTINT	; line 118
	LD	GR3, =33	; line 118
	LD	GR2, VAR, GR3	; line 118
	CALL	WRTINT	; line 118
	LD	GR3, =34	; line 118
	LD	GR2, VAR, GR3	; line 118
	CALL	WRTINT	; line 118
	LD	GR3, =35	; line 118
	LD	GR2, VAR, GR3	; line 118
	CALL	WRTINT	; line 118
	LD	GR2, =57	; line 118
	CALL	WRTCH	; line 118
	CALL	WRTLN	; line 118
	LD	GR2, =1	; line 120
	LD	GR3, =5	; line 120
	ST	GR2, VAR, GR3	; line 120
WHILE22	LD	GR3, =5	; line 121
	LD	GR2, VAR, GR3	; line 121
	LD	GR1, =13	; line 121
	CPA	GR2, GR1	; line 121
	JPL	ENDWH22	; line 121
	LD	GR3, =7	; line 123
	LD	GR2, VAR, GR3	; line 123
	PUSH	0, 	GR2	; line 123
	LD	GR3, =5	; line 123
	LD	GR1, VAR, GR3	; line 123
	POP		GR2	; line 123
	LD	GR3, =14	; line 123
	SUBA	GR1, =1	; line 123
	ADDA	GR3, GR1	; line 123
	ST	GR2, VAR, GR3	; line 123
	LD	GR3, =5	; line 124
	LD	GR2, VAR, GR3	; line 124
	LD	GR1, =1	; line 124
	ADDA	GR2, GR1	; line 124
	LD	GR3, =5	; line 124
	ST	GR2, VAR, GR3	; line 124
	JUMP	WHILE22	; line 121
ENDWH22	LD	GR2, =1	; line 127
	LD	GR3, =5	; line 127
	ST	GR2, VAR, GR3	; line 127
WHILE24	LD	GR3, =5	; line 129
	LD	GR2, VAR, GR3	; line 129
	LD	GR1, =13	; line 129
	CPA	GR2, GR1	; line 129
	JPL	ENDWH24	; line 129
	LD	GR3, =5	; line 131
	LD	GR2, VAR, GR3	; line 131
	LD	GR1, =5	; line 131
	CPA	GR2, GR1	; line 131
	JMI	IF25	; line 131
	JUMP	ENDIF25	; line 131
IF25	LD	GR3, =5	; line 133
	LD	GR2, VAR, GR3	; line 133
	LD	GR1, =3	; line 133
	CPA	GR2, GR1	; line 133
	JMI	IF26	; line 133
	JUMP	ENDIF26	; line 133
IF26	LD	GR3, =6	; line 135
	LD	GR2, VAR, GR3	; line 135
	PUSH	0, 	GR2	; line 135
	LD	GR3, =5	; line 135
	LD	GR1, VAR, GR3	; line 135
	POP		GR2	; line 135
	LD	GR3, =14	; line 135
	SUBA	GR1, =1	; line 135
	ADDA	GR3, GR1	; line 135
	ST	GR2, VAR, GR3	; line 135
	JUMP	ENDEL26	; line 138
ENDIF26	PUSH	66	; line 139
	LD	GR3, =5	; line 139
	LD	GR1, VAR, GR3	; line 139
	POP		GR2	; line 139
	LD	GR3, =14	; line 139
	SUBA	GR1, =1	; line 139
	ADDA	GR3, GR1	; line 139
	ST	GR2, VAR, GR3	; line 139
ENDEL26	JUMP	ENDEL25	; line 143
ENDIF25	PUSH	67	; line 144
	LD	GR3, =5	; line 144
	LD	GR1, VAR, GR3	; line 144
	POP		GR2	; line 144
	LD	GR3, =14	; line 144
	SUBA	GR1, =1	; line 144
	ADDA	GR3, GR1	; line 144
	ST	GR2, VAR, GR3	; line 144
ENDEL25	LD	GR2, =68	; line 147
	LD	GR3, =9	; line 147
	ST	GR2, VAR, GR3	; line 147
	LD	GR3, =5	; line 149
	LD	GR2, VAR, GR3	; line 149
	LD	GR1, =7	; line 149
	CPA	GR2, GR1	; line 149
	JMI	FALSE28	; line 149
	LAD	GR2, 65535	; line 149
	JUMP	CONT28	; line 149
FALSE28	LAD	GR2, 0	; line 149
CONT28	CPL	GR2, =-1	; line 149
	JNZ	ENDIF27	; line 149
	LD	GR3, =5	; line 151
	LD	GR2, VAR, GR3	; line 151
	LD	GR1, =11	; line 151
	CPA	GR2, GR1	; line 151
	JMI	IF29	; line 151
	JUMP	ENDIF29	; line 151
IF29	LD	GR3, =5	; line 153
	LD	GR2, VAR, GR3	; line 153
	LD	GR1, =9	; line 153
	CPA	GR2, GR1	; line 153
	JMI	IF30	; line 153
	JUMP	ENDIF30	; line 153
IF30	LD	GR3, =9	; line 155
	LD	GR2, VAR, GR3	; line 155
	PUSH	0, 	GR2	; line 155
	LD	GR3, =5	; line 155
	LD	GR1, VAR, GR3	; line 155
	POP		GR2	; line 155
	LD	GR3, =14	; line 155
	SUBA	GR1, =1	; line 155
	ADDA	GR3, GR1	; line 155
	ST	GR2, VAR, GR3	; line 155
	JUMP	ENDEL30	; line 158
ENDIF30	PUSH	69	; line 159
	LD	GR3, =5	; line 159
	LD	GR1, VAR, GR3	; line 159
	POP		GR2	; line 159
	LD	GR3, =14	; line 159
	SUBA	GR1, =1	; line 159
	ADDA	GR3, GR1	; line 159
	ST	GR2, VAR, GR3	; line 159
ENDEL30	JUMP	ENDEL29	; line 163
ENDIF29	LD	GR3, =5	; line 164
	LD	GR2, VAR, GR3	; line 164
	LD	GR1, =12	; line 164
	CPA	GR2, GR1	; line 164
	JPL	ENDIF31	; line 164
	PUSH	102	; line 166
	LD	GR3, =5	; line 166
	LD	GR1, VAR, GR3	; line 166
	POP		GR2	; line 166
	LD	GR3, =14	; line 166
	SUBA	GR1, =1	; line 166
	ADDA	GR3, GR1	; line 166
	ST	GR2, VAR, GR3	; line 166
	JUMP	ENDEL31	; line 169
ENDIF31	PUSH	103	; line 170
	LD	GR3, =5	; line 170
	LD	GR1, VAR, GR3	; line 170
	POP		GR2	; line 170
	LD	GR3, =14	; line 170
	SUBA	GR1, =1	; line 170
	ADDA	GR3, GR1	; line 170
	ST	GR2, VAR, GR3	; line 170
ENDEL31	NOP
ENDEL29	NOP
ENDIF27	LD	GR3, =5	; line 174
	LD	GR2, VAR, GR3	; line 174
	LD	GR1, =1	; line 174
	ADDA	GR2, GR1	; line 174
	LD	GR3, =5	; line 174
	ST	GR2, VAR, GR3	; line 174
	JUMP	WHILE24	; line 129
ENDWH24	LAD	GR2, CHAR11	; line 177
	LD	GR1, =13	; line 177
	CALL	WRTSTR	; line 177
	CALL	WRTLN	; line 177
	LD	GR3, =14	; line 178
	LD	GR2, VAR, GR3	; line 178
	CALL	WRTCH	; line 181
	LD	GR3, =15	; line 178
	LD	GR2, VAR, GR3	; line 178
	CALL	WRTCH	; line 181
	LD	GR3, =16	; line 178
	LD	GR2, VAR, GR3	; line 178
	CALL	WRTCH	; line 181
	LD	GR3, =17	; line 179
	LD	GR2, VAR, GR3	; line 179
	CALL	WRTCH	; line 181
	LD	GR3, =18	; line 179
	LD	GR2, VAR, GR3	; line 179
	CALL	WRTCH	; line 181
	LD	GR3, =19	; line 179
	LD	GR2, VAR, GR3	; line 179
	CALL	WRTCH	; line 181
	LD	GR3, =20	; line 180
	LD	GR2, VAR, GR3	; line 180
	CALL	WRTCH	; line 181
	LD	GR3, =21	; line 180
	LD	GR2, VAR, GR3	; line 180
	CALL	WRTCH	; line 181
	LD	GR3, =22	; line 180
	LD	GR2, VAR, GR3	; line 180
	CALL	WRTCH	; line 181
	LD	GR3, =23	; line 181
	LD	GR2, VAR, GR3	; line 181
	CALL	WRTCH	; line 181
	LD	GR3, =24	; line 181
	LD	GR2, VAR, GR3	; line 181
	CALL	WRTCH	; line 181
	LD	GR3, =25	; line 181
	LD	GR2, VAR, GR3	; line 181
	CALL	WRTCH	; line 181
	LD	GR3, =26	; line 181
	LD	GR2, VAR, GR3	; line 181
	CALL	WRTCH	; line 181
	CALL	WRTLN	; line 181
	RET
CHAR0	DC	'A'
CHAR1	DC	'b'
CHAR2	DC	'A'
CHAR3	DC	'b'
CHAR4	DC	'9'
CHAR5	DC	'B'
CHAR6	DC	'C'
CHAR7	DC	'D'
CHAR8	DC	'E'
CHAR9	DC	'f'
CHAR10	DC	'g'
CHAR11	DC	'AABBCCDDEEffg'
VAR	DS	37
LIBBUF	DS	256
	END
; lib.cas
;============================================================
; MULT: 掛け算を行うサブルーチン
; GR1 * GR2 -> GR2
MULT	START
	PUSH	0,GR1	; GR1の内容をスタックに退避
	PUSH	0,GR3	; GR3の内容をスタックに退避
	PUSH	0,GR4	; GR4の内容をスタックに退避
	LAD	GR3,0	; GR3を初期化
	LD	GR4,GR2
	JPL	LOOP
	XOR	GR4,=#FFFF
	ADDA	GR4,=1
LOOP	SRL	GR4,1
	JOV	ONE
	JUMP	ZERO
ONE	ADDL	GR3,GR1
ZERO	SLL	GR1,1
	AND	GR4,GR4
	JNZ	LOOP
	CPA	GR2,=0
	JPL	END
	XOR	GR3,=#FFFF
	ADDA	GR3,=1
END	LD	GR2,GR3
	POP	GR4
	POP	GR3
	POP	GR1
	RET
	END
;============================================================
; DIV 割り算を行うサブルーチン
; GR1 / GR2 -> 商は GR2, 余りは GR1
DIV	START
	PUSH	0,GR3
	ST	GR1,A
	ST	GR2,B
	CPA	GR1,=0
	JPL	SKIPA
	XOR	GR1,=#FFFF
	ADDA	GR1,=1
SKIPA	CPA	GR2,=0
	JZE	SKIPD
	JPL	SKIPB
	XOR	GR2,=#FFFF
	ADDA	GR2,=1
SKIPB	LD	GR3,=0
LOOP	CPA	GR1,GR2
	JMI	STEP
	SUBA	GR1,GR2
	LAD	GR3,1,GR3
	JUMP	LOOP
STEP	LD	GR2,GR3
	LD	GR3,A
	CPA	GR3,=0
	JPL	SKIPC
	XOR	GR1,=#FFFF
	ADDA	GR1,=1
SKIPC	XOR	GR3,B
	CPA	GR3,=0
	JZE	SKIPD
	JPL	SKIPD
	XOR	GR2,=#FFFF
	ADDA	GR2,=1
SKIPD	POP	GR3
	RET
A	DS	1
B	DS	1
	END
;============================================================
; 入力装置から数値データを読み込み，
; その内容をGR2が指すアドレスに格納するサブルーチン
RDINT	START
	PUSH	0,GR1	; GR1の内容をスタックに退避
	PUSH	0,GR3	; GR3の内容をスタックに退避
	PUSH	0,GR4	; GR4の内容をスタックに退避
	PUSH	0,GR5	; GR5の内容をスタックに退避
	PUSH	0,GR6	; GR6の内容をスタックに退避
	LD	GR5,GR2	; GR2が指す番地をGR5にコピー
	LD	GR2,=0	; GR2を初期化
	LD	GR3,=0	; GR3を初期化
	IN	INAREA,INLEN	; 入力を受け取る
	; 入力がnullかどうかのチェック
	CPA	GR3,INLEN
	JZE	ERROR
	; 最初の文字が'-'かどうかのチェック
	LD	GR4,INAREA,GR3
	LAD	GR3,1,GR3
	LD	GR6,GR4	; GR6に入力された先頭の文字を保存
	CPL	GR4,=#002D	; '-'かどうか
	JZE	LOOP
	CPL	GR4,='0'	; 数値かどうかのチェック
	JMI	ERROR
	CPL	GR4,='9'
	JPL	ERROR
	XOR	GR4,=#0030	; 数値だったら変換
	ADDA	GR2,GR4
	; 「すでに読み込んだ数値を10倍して，新しく読み込んだ数値と足す」を繰り返す
LOOP	CPA	GR3,INLEN
	JZE	CODE	; 入力された文字数とGR3が同じであればループを抜ける
	LD	GR1,=10
	CALL	MULT	; GR2の値を10倍する
	LD	GR4,INAREA,GR3
	CPL	GR4,='0'	; 数値かどうかのチェック
	JMI	ERROR
	CPL	GR4,='9'
	JPL	ERROR
	XOR	GR4,=#0030	; GR4の内容を数値に変換
	ADDA	GR2,GR4	; GR2にGR1の内容を足す
	LAD	GR3,1,GR3	; GR3(ポインタ)をインクリメント
	JUMP	LOOP
	; 最初の文字が'-'であった場合は-1倍する
CODE	CPL	GR6,=#002D
	JNZ	END
	XOR	GR2,=#FFFF
	LAD	GR2,1,GR2
	JUMP	END
	; エラーを出力する
ERROR	OUT	ERRSTR,ERRLEN
END	ST	GR2,0,GR5	; GR2の内容をGR5が指す番地に格納する
	LD	GR2,GR5	; GR5が指す番地をGR2に戻す
	POP	GR6
	POP	GR5
	POP	GR4
	POP	GR3
	POP	GR1
	RET
ERRSTR	DC	'illegal input'
ERRLEN	DC	13
INAREA	DS	6
INLEN	DS	1
	END
;============================================================
; 入力装置から文字を読み込み，
; その内容をGR2が指すアドレスに格納するサブルーチン
RDCH	START
	IN	INCHAR,INLEN
	LD	GR1,INCHAR
	ST	GR1,0,GR2
	RET
INCHAR	DS	1
INLEN	DS	1
	END
;============================================================
; 入力装置から，GR1の文字数を読み込む．
; 読み込んだ文字列は，GR2 が指すアドレスから順に格納される
RDSTR	START
	PUSH	0,GR3	; GR3の内容をスタックに退避
	PUSH	0,GR4	; GR4の内容をスタックに退避
	PUSH	0,GR5	; GR5の内容をスタックに退避
	LAD	GR4,0	; GR4を初期化
	IN	INSTR,INLEN
LOOP	CPA	GR4,GR1
	JZE	END	; GR1で指定された文字数を超えたら終わり
	CPA	GR4,INLEN
	JZE	END	; 入力された文字数を超えたら終わり
	LD	GR5,GR2
	ADDA	GR5,GR4	; 文字の格納先番地を計算
	LD	GR3,INSTR,GR4
	ST	GR3,0,GR5
	LAD	GR4,1,GR4
	JUMP	LOOP
END	POP	GR5
	POP	GR4
	POP	GR3
	RET
INSTR	DS	256
INLEN	DS	1
	END
;============================================================
; 入力装置からの文字列を改行まで読み飛ばすサブルーチン
RDLN	START
	IN	INAREA,INLEN
	RET
INAREA	DS	256
INLEN	DS	1
	END
;============================================================
; GR2の内容（数値データ）を出力装置に書き出すサブルーチン
; このサブルーチンが呼ばれたとき，
; GR7には，出力用番地の先頭アドレスが，
; GR6には，現在出力用番地に入っている文字数が，
; それぞれ格納されている．
WRTINT	START
	PUSH	0,GR1	; GR1の内容をスタックに退避
	PUSH	0,GR2	; GR2の内容をスタックに退避
	PUSH	0,GR3	; GR3の内容をスタックに退避
	PUSH	0,GR2	; 数値データをもう一度スタックに退避
	LD	GR3,=0	; GR3はインデックスとして用いる
	; 数値データが負数である場合は，正の数に変換
	CPA	GR2,=0
	JPL	LOOP1
	XOR	GR2,=#FFFF
	ADDA	GR2,=1
	; 数値データを変換しながら，バッファに格納
LOOP1	LD	GR1,GR2
	LD	GR2,=10
	CALL	DIV
	XOR	GR1,=#0030
	ST	GR1,BUFFER,GR3
	LAD	GR3,1,GR3
	CPA	GR2,=0
	JNZ	LOOP1
	; 数値データが負数であれば，'-'を追加
	POP	GR2
	CPA	GR2,=0
	JZE	LOOP2
	JPL	LOOP2
	LD	GR1,='-'
	ST	GR1,BUFFER,GR3
	LAD	GR3,1,GR3
	; BUFFERを逆順にたどりながら，出力用バッファに格納
LOOP2	LAD	GR3,-1,GR3
	LD	GR1,BUFFER,GR3
	LD	GR2,GR7
	ADDA	GR2,GR6
	ST	GR1,0,GR2
	LAD	GR6,1,GR6
	CPA	GR3,=0
	JNZ	LOOP2
END	POP	GR3
	POP	GR2
	POP	GR1
	RET
BUFFER	DS	6
	END
;============================================================
; GR2の内容（文字）を出力装置に書き出すサブルーチン
; このサブルーチンが呼ばれたとき，
; GR7には，出力用番地の先頭アドレスが，
; GR6には，現在出力用番地に入っている文字数が，
; それぞれ格納されている．
WRTCH	START
	PUSH	0,GR1	; GR1の内容をスタックに退避
	LD	GR1,GR7
	ADDA	GR1,GR6	; GR1に次の文字を格納する番地を代入
	ST	GR2,0,GR1
	LAD	GR6,1,GR6
	POP	GR1
	RET
	END
;============================================================
; [デバッグ未完了!!!!!!!!!!!!注意!!!!!!!!!!!!!!!!!!!!]
; コンマを出力装置に書き出すサブルーチン
; このサブルーチンが呼ばれたとき，
; GR1とGR2を使用する。
WRTCONM	START
	PUSH	0,GR1
	PUSH	0,GR2
	PUSH	0,GR3	; GR3の内容をスタックに退避
	PUSH	0,GR4	; GR4の内容をスタックに退避
	PUSH	0,GR5	; GR5の内容をスタックに退避
	LAD	GR3,0	; GR3は制御変数として用いる
	LAD	GR2,CONM
	LD	GR1,=2
LOOP	CPA	GR3,GR1
	JZE	END
	LD	GR4,GR2
	ADDA	GR4,GR3	; 出力する文字の格納番地を計算
	LD	GR5,0,GR4	; 出力する文字をレジスタにコピー
	LD	GR4,GR7
	ADDA	GR4,GR6	; 出力先の番地を計算
	ST	GR5,0,GR4	; 出力装置に書き出し
	LAD	GR3,1,GR3
	LAD	GR6,1,GR6
	JUMP	LOOP
END	POP	GR5
	POP	GR4
	POP	GR3
	POP	GR2
	POP	GR1
	RET
CONM	DC	', '
	END
;============================================================
; [デバッグ未完了!!!!!!!!!!!!注意!!!!!!!!!!!!!!!!!!!!]
; GR2の内容（boolean）を出力装置に書き出すサブルーチン
; このサブルーチンが呼ばれたとき，
; GR7には，出力用番地の先頭アドレスが，
; GR6には，現在出力用番地に入っている文字数が，
; それぞれ格納されている．
WRTBOL	START
	PUSH	0,GR1	; GR1の内容をスタックに退避
	PUSH	0,GR3	; GR3の内容をスタックに退避
	PUSH	0,GR4	; GR4の内容をスタックに退避
	PUSH	0,GR5	; GR5の内容をスタックに退避
	LAD	GR3,0	; GR3は制御変数として用いる
	CPL	GR2,=0	; GR2がfalseか比較
	JZE	FLSP
	LAD	GR2,TREV
	LD	GR1,=4
	JUMP	LOOP
FLSP	LAD	GR2,FLSV
	LD	GR1,=5
LOOP	CPA	GR3,GR1
	JZE	END
	LD	GR4,GR2
	ADDA	GR4,GR3	; 出力する文字の格納番地を計算
	LD	GR5,0,GR4	; 出力する文字をレジスタにコピー
	LD	GR4,GR7
	ADDA	GR4,GR6	; 出力先の番地を計算
	ST	GR5,0,GR4	; 出力装置に書き出し
	LAD	GR3,1,GR3
	LAD	GR6,1,GR6
	JUMP	LOOP
END	POP	GR5
	POP	GR4
	POP	GR3
	POP	GR1
	RET
FLSV	DC	'false'
TREV	DC	'true'
	END
;============================================================
; GR2の指すメモリ番地から，長さGR1の文字列を出力装置に書き出すサブルーチン
; このサブルーチンが呼ばれたとき，
; GR7には，出力用番地の先頭アドレスが，
; GR6には，現在出力用番地に入っている文字数が，
; それぞれ格納されている．
WRTSTR	START
	PUSH	0,GR3	; GR3の内容をスタックに退避
	PUSH	0,GR4	; GR4の内容をスタックに退避
	PUSH	0,GR5	; GR5の内容をスタックに退避
	LAD	GR3,0	; GR3は制御変数として用いる
LOOP	CPA	GR3,GR1
	JZE	END
	LD	GR4,GR2
	ADDA	GR4,GR3	; 出力する文字の格納番地を計算
	LD	GR5,0,GR4	; 出力する文字をレジスタにコピー
	LD	GR4,GR7
	ADDA	GR4,GR6	; 出力先の番地を計算
	ST	GR5,0,GR4	; 出力装置に書き出し
	LAD	GR3,1,GR3
	LAD	GR6,1,GR6
	JUMP	LOOP
END	POP	GR5
	POP	GR4
	POP	GR3
	RET
	END
;============================================================
; 改行を出力装置に書き出すサブルーチン
; 実質的には，GR7で始まるアドレス番地から長さGR6の文字列を出力する
WRTLN	START
	PUSH	0,GR1
	PUSH	0,GR2
	PUSH	0,GR3
	ST	GR6,OUTLEN
	LAD	GR1,0
LOOP	CPA	GR1,OUTLEN
	JZE	END
	LD	GR2,GR7
	ADDA	GR2,GR1
	LD	GR3,0,GR2
	ST	GR3,OUTSTR,GR1
	LAD	GR1,1,GR1
	JUMP	LOOP
END	OUT	OUTSTR,OUTLEN
	LAD	GR6,0	; 文字列を出力して，GR6を初期化
	POP	GR3
	POP	GR2
	POP	GR1
	RET
OUTSTR	DS	256
OUTLEN	DS	1
	END
